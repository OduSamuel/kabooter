# API Documentation.

#### Contents

<!-- Table of contents generated generated by http://tableofcontent.eu -->

- [Login](#login)

- [Logout](#logout)

- [Register User](#register-user)

- [Change Password](#change-password)

- [User's Profile](#users-profile)

- [Create Quiz](#create-quiz)

- [Update Quiz](#update-quiz)

- [Delete Quiz given id](#delete-quiz-given-id)

- [Get Quizzes](#get-quizzes)

- [Get Quiz given id](#get-quiz-given-id)

- [Get Quizzes created by logged-in user only](#get-quizzes-created-by-logged-in-user-only)

- [Get Quiz of a given id created by logged-in user](#get-quiz-of-a-given-id-created-by-logged-in-user)

- [Create Quiz Question](#create-quiz-question)

- [Update Quiz Question](#update-quiz-question)

- [Delete Quiz Question given id](#delete-quiz-question-given-id)

- [Get Quiz Questions](#get-quiz-questions)

- [Get Quiz Question given id](#get-quiz-question-given-id)

## Login

**POST to /login**

### Request Data

A JSON object with the following keys.

| Key            | Required? | Type    | Description                          |
| -------------- | --------- | ------- | ------------------------------------ |
| **username**   | Yes       | string  | Username or email.                   |
| **password**   | Yes       | string  | The password.                        |
| **rememberme** |           | boolean | Tell us if we need to remember user. |

### Response Data

A JSON object with the following keys. Use this data to customize client display. For instance, you can display the logged-in user's names, username, email and/or user roles somewhere on the landing page. You can save it on the browser - localStorage or sessionStorage; but not cookies since we don't need you to be sending it to the server with every request.

| Key       | Type   | Description                                                                                                                                                                                      |
| --------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **token** | string | The auth token. We'll verify if on every request to protected resource. Set it in request header line this: _request.headers["Authorization"] = "Bearer " + token;_ to every subsequent request. |
| **user**  | Object | Some info about the user. [See definition](#user)                                                                                                                                                |

#### **user**

| Key   | Type    | Description                                     |
| ----- | ------- | ----------------------------------------------- |
| **i** | integer | User db id. You may need it for querying later. |
| **u** | string  | The username.                                   |
| **f** | string  | User's first name                               |
| **l** | string  | User's last name.                               |
| **r** | string  | User's roles.                                   |

NB: You can save the token on the browser's localStorage or sessionStorage.

[Back to table of contents](#contents)

## Logout

This should be handled on the client. No server interaction. Just delete the token you got from server when you logged in. In the future, you may be needed to call the server; but for now, no.

[Back to table of contents](#contents)

## Register User

**POST to /register**

### Request Data

A JSON object with the following keys.

| Key              | Required?         | Type    | Description              |
| ---------------- | ----------------- | ------- | ------------------------ |
| **phone**        | Yes if no _email_ | string  | Phone number.            |
| **email**        | Yes if no _phone_ | string  | Email.                   |
| **password**     | Yes               | string  | The password.            |
| **organization** |                   | string  | The user's organization. |
| **firstname**    | Yes               | string  | The user's first name.   |
| **lastname**     | Yes               | string  | The user's last name.    |
| **usertype**     |                   | integer | User type.               |

### Response Data

No data. You'll just get an OK status.

[Back to table of contents](#contents)

## Change Password

**POST to /api/user/changepassword**

### Request Data

A JSON object with the following keys.

| Key        | Required? | Type   | Description           |
| ---------- | --------- | ------ | --------------------- |
| **oldPwd** | Yes       | string | The current password. |
| **newPwd** | Yes       | string | The new password.     |

### Response Data

No data. You'll just get an OK status.

[Back to table of contents](#contents)

## User's Profile

**GET to /api/user/profile**

This retrieves all the quizzes set up by a given user. For this query, we'll only give you the quizzes and their questions. When you query a particular quiz for a user, we can then package all other info: people who participated, scores, etc.

### Request Data

None.

### Response Data

The response data will be an object whose keys are defined below.

| Key                  | Type    | Description                             |
| -------------------- | ------- | --------------------------------------- |
| **id**               | integer | The user's id                           |
| **email**            | string  | The user's email                        |
| **username**         | string  | The user's username                     |
| **lastname**         | string  | The user's surname                      |
| **firstname**        | string  | The user's first name                   |
| **organization**     | string  | The user's organization                 |
| **roles**            | string  | The user's user role(s)                 |
| **usertype**         | string  | The user's usertype                     |
| **nQuizzes**         | integer | Number of quizzes the user has set up   |
| **nQuizzesAnswered** | integer | Number of quizzes the user has answered |
| **nVotes**           | integer | Number of votes the user has set up     |
| **nVotesCast**       | integer | Number of votes the user has cast       |

[Back to table of contents](#contents)

# Quiz

### Quiz Data Definition (**request**)

A JSON object with the following keys.

| Key                 | Required? | Type    | Description                                                  |
| ------------------- | --------- | ------- | ------------------------------------------------------------ |
| **id**              | Yes       | integer | The quiz'd id                                                |
| **title**           | Yes       | string  | Quiz title                                                   |
| **audience**        |           | integer | Audience. Put 1 for Social, 2, for School.                   |
| **introLink**       |           | url     | (Video) link introducing the quiz.                           |
| **visibleTo**       |           | integer | Who may see the quiz? 1 for Everyone. 2 for only the creator |
| **creditResources** |           | string  | Bibliography                                                 |

### Quiz Data Definition (**response**)

| Key                 | Type       | Description                                         |
| ------------------- | ---------- | --------------------------------------------------- |
| **id**              | integer    | The quiz id                                         |
| **title**           | string     | The quiz title                                      |
| **published**       | boolean    | Whether or not the quiz has been published          |
| **creditResources** | string     | Credits; bibliography                               |
| **userId**          | string     | The quiz owner's id                                 |
| **introLink**       | string     | Video or other link introducing the quiz            |
| **visibleTo**       | Enum (int) | 1 for '_Everyone_'; 2 for '_Only Me_'.              |
| **audience**        | Enum (int) | 1 for '_Social_'; 2 for '_School_'.                 |
| **questions**       | Object     | The quiz's questions.. [See definition](#questions) |

## Create Quiz

**POST to /api/user/quizzes/create**

### Request Data

JSON Object. [Use Quiz Data Definition (request)](#quiz-data-definition-request) but don't include the `id` key.

### Response Data

The response data will be an object whose keys are defined below.

| Key    | Type    | Description       |
| ------ | ------- | ----------------- |
| **id** | integer | The new quiz'd id |

[Back to table of contents](#contents)

## Update Quiz

**POST to /api/user/quizzes/update**

### Request Data

JSON object. [Use Quiz Data Definition (request)](#quiz-data-definition-request).

### Response Data

No data. You'll just get an OK status.

[Back to table of contents](#contents)

## Delete Quiz given id

**POST to /api/user/quizzes/delete/:id**

Where `:id` is the quiz's id, an integer.

### Request Data

None.

### Response Data

No data. You'll just get an OK status.

[Back to table of contents](#contents)

## Get Quizzes

**GET to /api/user/quizzes**

### Request Data

Query string the the following keys.

| Key    | Required | Type | Description                                                                                                                                            |
| ------ | -------- | ---- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **wq** |          | char | Set `'y'` to retrieve quiz with the questions associated with it. Ignore or set value to `'n'` if you only need the quiz record without the questions. |

### Response Data

An array of JSON objects. [Use Quiz Data Definition (response)](#quiz-data-definition-response)

[Back to table of contents](#contents)

## Get Quiz given id

**GET to /api/user/quizzes/:id**

Where `:id` is the quiz's id, an integer.

### Request Data

Query string the the following keys.

| Key    | Required | Type | Description                                                                                                                                            |
| ------ | -------- | ---- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **wq** |          | char | Set `'y'` to retrieve quiz with the questions associated with it. Ignore or set value to `'n'` if you only need the quiz record without the questions. |

### Response Data

A JSON object. [Use Quiz Data Definition (response)](#quiz-data-definition-response)

[Back to table of contents](#contents)

## Get Quizzes created by logged-in user only

**GET to /api/user/quizzes/my**

This retrieves all the quizzes set up by a given user. For this query, we'll only give you the quizzes and their questions, at best. If you want the questions, set `wq=y` in query string. In the future, when you query a particular quiz for a user, we can then package all other info: people who participated, scores, etc.

### Request Data

Query string the the following keys.

| Key    | Required | Type | Description                                                                                                                                            |
| ------ | -------- | ---- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **wq** |          | char | Set `'y'` to retrieve quiz with the questions associated with it. Ignore or set value to `'n'` if you only need the quiz record without the questions. |

### Response Data

An array of JSON objects. [Use Quiz Data Definition (response)](#quiz-data-definition-response)

#### questions

| Key                | Type    | Description                                                                                                                                        |
| ------------------ | ------- | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| **id**             | integer | The question id                                                                                                                                    |
| **quizId**         | integer | The id of the quiz this this question belongs to                                                                                                   |
| **question**       | string  | The question                                                                                                                                       |
| **timeLimit**      | integer | Time limit **in seconds**                                                                                                                          |
| **option1**        | string  | The 1st option                                                                                                                                     |
| **option2**        | string  | The 2nd option                                                                                                                                     |
| **option3**        | string  | The 3rd option                                                                                                                                     |
| **option4**        | string  | The 4th option                                                                                                                                     |
| **correctOptions** | string  | The correct option, specified as 1,2,3,or 4. When there are more than one correct options, the numbers are separated by comma (,). E.g. "1", "2,3" |

[Back to table of contents](#contents)

## Get Quiz of a given id created by logged-in user

**GET to /api/user/quizzes/my/:id**

Where `:id` is the quiz's id, an integer.

### Request Data

Query string the the following keys.

| Key    | Required | Type | Description                                                                                                                                            |
| ------ | -------- | ---- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **wq** |          | char | Set `'y'` to retrieve quiz with the questions associated with it. Ignore or set value to `'n'` if you only need the quiz record without the questions. |

### Response Data

A JSON object. [Use Quiz Data Definition (response)](#quiz-data-definition-response)

[Back to table of contents](#contents)

# Quiz Question

### Quiz Question Data Definition (**request**)

A JSON object with the following keys.

| Key                 | Required? | Type    | Description                                                                                                                                        |
| ------------------- | --------- | ------- | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| **id**              | Yes       | integer | The id of the record to update                                                                                                                     |
| **question**        | Yes       | string  | The question                                                                                                                                       |
| **timeLimit**       | Yes       | integer | Time limit **in seconds**                                                                                                                          |
| **quizId**          | Yes       | integer | Id of the quiz this question belong to                                                                                                             |
| **option1**         | Yes       | string  | 1st answer option                                                                                                                                  |
| **option2**         | Yes       | string  | 2nd answer option                                                                                                                                  |
| **option3**         |           | string  | 3rd answer option                                                                                                                                  |
| **option4**         |           | string  | 4th answer option                                                                                                                                  |
| **correctOptions**  | Yes       | string  | The correct option, specified as 1,2,3,or 4. When there are more than one correct options, the numbers are separated by comma (,). E.g. "1", "2,3" |
| **points**          |           | integer | Points to be earned if answered correctly.                                                                                                         |
| **maxBonus**        |           | integer | Max bonus point to be awarded.                                                                                                                     |
| **introLink**       |           | url     | (Video) link introducing the quiz.                                                                                                                 |
| **visibleTo**       |           | integer | Who may see the quiz? 1 for Everyone. 2 for only the creator                                                                                       |
| **creditResources** |           | string  | Bibliography                                                                                                                                       |

### Quiz Question Data Definition (**response**)

A JSON object with the following keys.

| Key                 | Type    | Description                                                                                                                                        |
| ------------------- | ------- | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| **id**              | integer | The id of the record to update                                                                                                                     |
| **question**        | string  | The question                                                                                                                                       |
| **timeLimit**       | integer | Time limit **in seconds**                                                                                                                          |
| **quizId**          | integer | Id of the quiz this question belong to                                                                                                             |
| **option1**         | string  | 1st answer option                                                                                                                                  |
| **option2**         | string  | 2nd answer option                                                                                                                                  |
| **option3**         | string  | 3rd answer option                                                                                                                                  |
| **option4**         | string  | 4th answer option                                                                                                                                  |
| **correctOptions**  | string  | The correct option, specified as 1,2,3,or 4. When there are more than one correct options, the numbers are separated by comma (,). E.g. "1", "2,3" |  |
| **points**          | integer | Points to be earned if answered correctly.                                                                                                         |
| **maxBonus**        | integer | Max bonus point to be awarded.                                                                                                                     |
| **introLink**       | url     | (Video) link introducing the quiz.                                                                                                                 |
| **visibleTo**       | integer | Who may see the quiz? 1 for Everyone. 2 for only the creator                                                                                       |
| **creditResources** | string  | Bibliography                                                                                                                                       |

## Create Quiz Question

**POST to /api/user/quizquestions/create**

### Request Data

JSON Object. [Use Quiz Question Data Definition (request)](#quiz-question-data-definition-request) but don't include the `id` key.

### Response Data

The response data will be an object whose keys are defined below. _points_ and _maxBonus_ are provided for convenience - for instance, when you want to use those values to pre-fill the next question setup for your users.

| Key          | Type    | Description                                |
| ------------ | ------- | ------------------------------------------ |
| **id**       | integer | The new quiz question's id                 |
| **points**   | integer | Points to be earned if answered correctly. |
| **maxBonus** | integer | Max bonus point to be awarded.             |

[Back to table of contents](#contents)

## Update Quiz Question

**POST to /api/user/quizquestions/update**

### Request Data

JSON Object. [Use Quiz Question Data Definition (request)](#quiz-question-data-definition-request).

### Response Data

No data. You'll just get an OK status.

[Back to table of contents](#contents)

## Delete Quiz Question given id

**POST to /api/user/quizquestions/delete/:id**

Where `:id` is the quiz's id, an integer.

### Request Data

None.

### Response Data

No data. You'll just get an OK status.

[Back to table of contents](#contents)

## Get Quiz Questions

**GET to /api/user/quizquestions**

### Request Data

Query string with the following keys.

| Key        | Required? | Type    | Description                                       |
| ---------- | --------- | ------- | ------------------------------------------------- |
| **quizId** | Yes       | integer | The id of the quiz this quiz question belongs to. |

### Response Data

An array of JSON objects. [Use Quiz Question Data Definition (response)](#quiz-question-data-definition-response)

[Back to table of contents](#contents)

## Get Quiz Question given id

**GET to /api/user/quizquestions/:id**

Where `:id` is the quiz's id, an integer.

### Request Data

Query string with the following keys.

| Key        | Required? | Type    | Description                                       |
| ---------- | --------- | ------- | ------------------------------------------------- |
| **quizId** | Yes       | integer | The id of the quiz this quiz question belongs to. |

### Response Data

JSON object. [Use Quiz Question Data Definition (response)](#quiz-question-data-definition-response)

[Back to table of contents](#contents)
